<script>
async function login(){
  const r = await fetch("/api/login", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      username:user.value,
      password:pass.value
    })
  })

  const data = await r.json()
  if(!r.ok){
    err.textContent = data.error
    return
  }

  localStorage.token = data.token
  localStorage.user = JSON.stringify(data.user)

  location.href = "index.html"
}
</script>
